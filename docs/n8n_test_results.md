# n8n Webhook Test Results

## Test Summary

**Date:** 2026-02-16 18:24:10  
**Base URL:** `https://vitcornu.app.n8n.cloud/webhook`  
**Total Endpoints Tested:** 7  
**Success Rate:** 7/7 (100%)

---

## 1. GetActiveBrands âœ…

**Endpoint:** `GET /GetActiveBrands`  
**Status:** 200 OK

**Response Format:**
```json
[
    {
        "brand_list": [
            "VitCornu",
            "Temango"
        ]
    }
]
```

**Notes:**
- Returns an **array** with one object containing `brand_list`
- `brand_list` is an array of brand name strings
- Frontend API service has been updated to handle this format

---

## 2. GetBrandDetails âœ…

**Endpoint:** `GET /GetBrandDetails?brand_name=VitCornu`  
**Status:** 200 OK

**Response Format:**
```json
{
    "Brand": "VitCornu",
    "Target_Persona": "Eleanor: The Mindful Director\r\nAge 48, UK...",
    "Compliance_Disclaimer_Block": "",
    "CSS_Wrapper_Link": "https://vitcornucom.sharepoint.com/...",
    "ID": 1,
    ...
}
```

**Notes:**
- Returns detailed brand configuration from Google Sheets
- Includes persona, compliance info, CSS links, and more

---

## 3. FetchBacklogIdeas âœ…

**Endpoint:** `GET /FetchBacklogIdeas`  
**Status:** 200 OK

**Response Format:**
```json
[
    {
        "ID": 1,
        "Title": "keyword title",
        "Target_Brand": "brand name",
        "Status": "Approved for Briefing",
        "Approved_Outline": "",
        "Is_Outline_Approved": false,
        "Search_Summary": "",
        "AI_Reasoning": "",
        "Draft_HTML_Body": "",
        "Image_Prompt": "",
        "Alt_Text_Suggested": "",
        "Cover_Image_URL": "",
        ...
    }
]
```

**Notes:**
- Returns array of Google Sheets rows with status "Approved for Briefing"
- Contains all columns from the VitCornu_AI sheet

---

## 4. FetchItemDetails âœ…

**Endpoint:** `GET /FetchItemDetails?id=1`  
**Status:** 200 OK

**Response Format:**
```json
{
    "ID": 1,
    "Title": "item title",
    "Target_Brand": "brand",
    "Status": "status",
    ...
}
```

**Notes:**
- Returns single Google Sheets row matching the ID
- Same structure as FetchBacklogIdeas but for a specific item

---

## 5. SaveScoredIdea âœ…

**Endpoint:** `POST /SaveScoredIdea`  
**Status:** 200 OK

**Request Parameters:**
```
Keyword=test keyword from python
Brand=VitCornu
scores_p=4
scores_a=3
scores_v=4
scores_e=4
search_summary=Test search summary
reasoning=Test AI reasoning
```

**Response:**
```json
{
    "success": true,
    ...
}
```

**Notes:**
- Accepts URL query parameters (not JSON body)
- Calculates total PAVE score (P+A+V+E)
- Auto-assigns status: "Approved for Briefing" if total >= 18, else "PAVE Scored"
- Appends a new row to Google Sheets

---

## 6. UpdateBriefAndStatus âœ…

**Endpoint:** `PUT /UpdateBriefAndStatus`  
**Status:** 200 OK

**Request Body:**
```json
{
    "id": "1",
    "brief_text": "## Test Authority Brief\n\nThis is a test brief generated by Python script."
}
```

**Response:**
```json
{
    "success": true
}
```

**Notes:**
- Updates the `Authority_Brief` column in Google Sheets
- Matches row by `ID`

---

## 7. UpdateContentStatus âœ…

**Endpoint:** `PUT /UpdateContentStatus`  
**Status:** 200 OK

**Request Body:**
```json
{
    "id": "1",
    "new_status": "In Production"
}
```

**Response:**
```json
{
    "success": true
}
```

**Notes:**
- Updates the `Status` column in Google Sheets
- Common statuses: "PAVE Scored", "Approved for Briefing", "Briefed", "In Production", "Published"

---

## Frontend Integration Status

| Endpoint | Frontend Integration | Status |
|---|---|---|
| GetActiveBrands | âœ… `api.getBrands()` | Working |
| GetBrandDetails | âœ… `api.getBrandDetails(name)` | Working |
| FetchBacklogIdeas | âœ… `api.getBacklog()` | Working |
| FetchItemDetails | âœ… `api.getContentDetails(id)` | Working |
| SaveScoredIdea | âœ… `api.saveIdea(data)` | Working |
| UpdateBriefAndStatus | âœ… `api.generateBrief(data)` | Working |
| UpdateContentStatus | âœ… `api.publishContent(id)` | Working |

---

## Still Missing in n8n

These frontend endpoints are **not yet implemented** in your n8n workflow:

1. **AnalyzeKeyword** (PAVE Scoring)
   - Endpoint: `/webhook/AnalyzeKeyword`
   - Needs: Bing Search + Azure OpenAI PAVE analysis

2. **RecommendFormat** (Content Format AI)
   - Endpoint: `/webhook/RecommendFormat`
   - Needs: Azure OpenAI format recommendation

3. **ProduceContent** (HTML + Image Generation)
   - Endpoint: `/webhook/ProduceContent`
   - Needs: Azure OpenAI + DALL-E 3

---

## Next Steps

1. âœ… All existing n8n webhooks are working correctly
2. âœ… Frontend is properly integrated with all available endpoints
3. ðŸ”¨ Build the 3 missing n8n workflows for full functionality
4. ðŸ§ª Test the complete end-to-end flow
